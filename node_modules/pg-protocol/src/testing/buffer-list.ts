export default class BufferList {
  constructor(public buffers: Buffer[] = []) {}

  public add(buffer: Buffer, front?: boolean) {
    this.buffers[front ? 'unshift' : 'push'](buffer)
    return this
  }

  public addInt16(val: number, front?: boolean) {
    return this.add(Buffer.from([val >>> 8, val >>> 0]), front)
  }

  public getByteLength(initial?: number) {
    return this.buffers.reduce(function (previous, current) {
      return previous + current.length
    }, initial || 0)
  }

  public addInt32(val: number, first?: boolean) {
    return this.add(
      Buffer.from([(val >>> 24) & 0xff, (val >>> 16) & 0xff, (val >>> 8) & 0xff, (val >>> 0) & 0xff]),
      first
    )
  }

  public addCString(val: string, front?: boolean) {
    var